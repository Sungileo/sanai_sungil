p + scale_fill_gradient(low="yellow", high="red")
p
p <- map_satellite +
stat_bin2d(data = daejeon, aes(x = 경도, y = 위도),bins=30, alpha = 0.5) +
scale_fill_gradient(low="yellow", high="red")
p
p_count <- ggplot_build(p)$data[[4]] #cell의 값 출력
p_count <- arrange(p_count,desc(value))
#Grid 내에 count된 값 및 위치 확인하기
p_count <- ggplot_build(p)$data[[4]] #cell의 값 출력
p_count <- arrange(p_count,desc(value))
p + scale_fill_gradient(low="yellow", high="red") +
geom_text(data=p_count, aes((xmin + xmax)/2, (ymin + ymax)/2,
label=count), col="white")
map_satellite +
stat_bin2d(data = daejeon,
aes(x = 경도,
y = 위도,
colour=factor(사고유형),
fill=factor(사고유형)),
bins=30, alpha = 0.5)
map_satellite +
stat_bin2d(data = daejeon,
aes(x = 경도,
y = 위도,
colour=factor(`사고유형`),
fill=factor(`사고유형`)),
bins=30, alpha = 0.5)
map_bw <- qmap(location = "대전", zoom = 12, maptype='roadmap', color='bw')
map_bw <- qmap(location = "daejeon", zoom = 12, maptype='roadmap', color='bw')
map_bw + stat_density2d(data = daejeon, aes(x = 경도, y = 위도, fill=..level..),
bins=5, alpha = 0.45, size = 2, geom="polygon")
View(daejeon)
install.packages("hexbin")
library(hexbin)
map_road +
coord_cartesian() +
geom_hex(data = daejeon, aes(x = 경도, y = 위도),
bins=12, alpha = 0.6, color="white") #geom_hex() only works with Cartesian coordinates
map_road +
coord_cartesian() +
geom_hex(data = daejeon, aes(x = 경도, y = 위도),
bins=12, alpha = 0.6, color="white") +
scale_fill_gradientn(colours = terrain.colors(15))
map_road + coord_cartesian() + geom_hex(data = daejeon, binwidth =c(0.05,0.05),aes(x = 경도, y = 위도), alpha = 0.6, color="white") #geom_hex() only works with Cartesian coordinates
map_road +
coord_cartesian() +
geom_hex(data = daejeon, binwidth =c(0.05,0.05),aes(x = 경도, y = 위도), alpha = 0.6, color="white")+ scale_fill_gradientn(colours = terrain.colors(15))
map_road +
coord_cartesian() +
geom_hex(data = daejeon, binwidth =c(0.05,0.05),aes(x = 경도, y = 위도), alpha = 0.6, color="white")+ scale_fill_gradientn(colours = terrain.colors(15))
p_count <- ggplot_build(p)$data[[4]] #cell의 값 출력
p_count <- arrange(p_count,desc(count))
p_count
install.packages("raster")
install.packages("raster")
install.packages("rgdal")
library(raster)
library(raster)
library(rgdal)
library(sf)
#동별 사망사고 추출하기
map <- qmap(location = "daejeon", zoom = 11, maptype='roadmap', color='bw')
daejeon_area <- shapefile('LARD_ADM_SECT_SGG_30.shp')
daejeon_area <- shapefile('"C:\trainsets_2\LARD_ADM_SECT_SGG_대전\LARD_ADM_SECT_SGG_30.shp"')
daejeon_area <- shapefile('"C:/trainsets_2/LARD_ADM_SECT_SGG_대전/LARD_ADM_SECT_SGG_30.shp"')
daejeon_area <- shapefile('"C:/trainsets_2/LARD_ADM_SECT_SGG_대전/LARD_ADM_SECT_SGG_30.shp"')
daejeon_area <- shapefile('"C:/trainsets_2/LARD_ADM_SECT_SGG_/LARD_ADM_SECT_SGG_30.shp"')
daejeon_area <- shapefile('"C:/trainsets_2/LARD_ADM_SECT_SGG_/LARD_ADM_SECT_SGG_30.shp"')
daejeon_area <- shapefile('"C:/trainsets_2/LARD_ADM_SECT_SGG_/LARD_ADM_SECT_SGG_30.shp"')
getwd()
daejeon_area <- shapefile('"C:/trainsets_2/LARD_ADM_SECT_SGG_/LARD_ADM_SECT_SGG_30.shp"')
daejeon_area <- shapefile("C:/trainsets_2/LARD_ADM_SECT_SGG_/LARD_ADM_SECT_SGG_30.shp")
daejeon_area
str(daejeon_area)
str(daejeon_area)
plot(daejeon_area,axes=T)
to_crs = CRS("+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs")
daejeon_area2 <- spTransform(daejeon_area, to_crs)
daejeon_area2
plot(daejeon_area2, axes = T)
map + geom_polygon(data = daejeon_area2, aes(x=long, y=lat, group=group), fill='white', color='black')
map_road + geom_polygon(data = daejeon_area2, aes(x=long, y=lat, group=group), fill='white', color='black')
map_satellite + geom_polygon(data = daejeon_area2, aes(x=long, y=lat, group=group), fill='white', color='black')
map + geom_polygon(data = daejeon_area2, aes(x=long, y=lat, group=group), fill='white', color='black')
#구별 사고 발생 건수 합 계산
gu_accident <- daejeon %>% group_by(발생지시군구) %>% summarise(n=n())
head(gu_accident)
gu_accident
head(gu_accident)
View(daejeon_area)
daejeon_area2 %>% ggplot()+
geom_polygon()
daejeon_area2 %>% ggplot()+
geom_sf()
daejeon_area2 %>% ggplot(aes(fill=daejeon_area2$SGG_NM))+
geom_sf()
daejeon_area2 %>% ggplot(aes(fill=SGG_NM))+
geom_sf()
daejeon_area2_for <- fortify(daejeon_area2, region='SGG_NM')
install.packages("maptools")
daejeon_area2_for <- fortify(daejeon_area2, region='SGG_NM')
daejeon_area2_for <- fortify(daejeon_area2, region='SGG_NM')
library(maptools)
daejeon_area2_for <- fortify(daejeon_area2, region='SGG_NM')
head(daejeon_area2_for)
View(daejeon_area2)
dae <- st_as_sf(daejeon_area2)
View(dae)
dae %>% ggplot(aes(fill=SGG_NM))+
geom_sf()
map
map+geom_sf(data = dae)
map+geom_sf(data = dae,aes(fill=SSG_NM))
map+geom_sf(data = dae,aes(fill=SGG_NM))
dae %>% ggplot(aes(fill=SGG_NM))+
geom_polygon()
dae %>% ggplot(aes(fill=SGG_NM))+
geom_sf()
daejeon_area2
daejeon_area2 <- fortify(daejeon_area2, region='SGG_NM')
View(daejeon_area2)
View(dae)
geom_sf(dae)
geom_sf(dae,aes())
geom_sf(data = dae,mapping = aes())
geom_sf(data = dae,mapping = aes())
geom_sf(data = dae,mapping = aes(dae$SGG_NM))
geom_sf(data = dae,mapping = aes(SGG_NM))
map +geom_sf(data = dae,mapping = aes(SGG_NM))
dae %>% ggplot(aes(fill=SGG_NM))+
geom_sf()
library(tmap)
map +
tm_shape(dae["SGG_NM"])
map +
tm_shape(dae["SGG_NM"])+
tm_polygons()
library(tmap)
tm_shape(dae["SGG_NM"])+
tm_polygons()
tmap_mode("view")
tm_shape(dae["SGG_NM"])+
tm_polygons()
tm_shape(dae["SGG_NM"])+
tm_polygons(alpha =0.4)
tm_shape(dae["SGG_NM"])+
tm_polygons(alpha =0.4,fill="SGG_NM")
tm_shape(dae["SGG_NM"])+
tm_polygons(alpha =0.4,fill=dae["SGG_NM"])
tm_shape(dae["SGG_NM"])+
tm_polygons(alpha =0.4,color=dae["SGG_NM"])
tm_shape(dae["SGG_NM"])+
tm_polygons(alpha =0.4,color="SGG_NM")
tm_shape(dae["SGG_NM"])+
tm_polygons(alpha =0.4)
names(dae[2])
names(dae[3])
names(dae)[2]
View(gu_accident)
names(dae)[2] <- "id"
tm_shape(dae["SGG_NM"])+
tm_polygons(alpha =0.4)
tm_shape(dae["id"])+
tm_polygons(alpha =0.4)
names(gu_accident)[1] <- "id"
daejeon_area3 <- merge(daejeon_area2, gu_accident, by='id')
daejeon_area3 <- merge(dae, gu_accident, by='id')
head(daejeon_area3)
View(daejeon_area3)
daejeon_area3 %>% ggplot(aes(fill=n))+
geom_sf()
tm_shape(daejeon_area3)
tm_shape(daejeon_area3)+
tm_polygons()
tm_shape(daejeon_area3)+
tm_polygons(fill=n)
tm_shape(daejeon_area3)+
tm_polygons()+
tm_fill(col=n)
tm_shape(daejeon_area3)+
tm_polygons()+
tm_fill(col=daejeon_area3$n)
daejeon_area3$n
tm_shape(daejeon_area3)+
tm_polygons()+
tm_fill(col=c(0,0,0))
tm_shape(daejeon_area3)+
tm_polygons()+
tm_fill(col=factor(daejeon_area3$n))
tm_shape(daejeon_area3)+
tm_fill(col=factor(daejeon_area3$n))
tm_shape(daejeon_area3)+
tm_fill()
tm_shape(daejeon_area3)+
tm_fill(n)
tm_shape(daejeon_area3)+
tm_fill(col=daejeon_area3$n)
tm_shape(daejeon_area3)+
tm_polygons()
tm_shape(daejeon_area3$n)+
tm_polygons()
tm_shape(daejeon_area3["n"])+
tm_polygons()
tm_shape(daejeon_area3)+
tm_polygons()
tm_shape(daejeon_area3)+
tm_fill(col="n")
tm_shape(daejeon_area3)+
tm_fill(col="n")+
tm_borders(col="black")
tm_shape(daejeon_area3)+
tm_fill(col="n",alpha = 0.4)+
tm_borders(col="black",alpha = 0.4)
tm_shape(daejeon_area3)+
tm_fill(col="n",alpha = 0.4)+
tm_borders(col="black",alpha = 0.4)
tm_shape(daejeon_area3)+
tm_fill(col="n",alpha = 0.8)+
tm_borders(col="black",alpha = 0.4)
tm_shape(daejeon_area3)+
tm_fill(col="n",alpha = 0.8,palette = "viridis")+
tm_borders(col="black",alpha = 0.4)
tm_shape(daejeon_area3)+
tm_fill(col="n",alpha = 0.8,palette = "viridis")+
tm_borders(col="black",alpha = 0.4)+
tm_layout(legend.position = c("right", "bottom"))
tm_shape(daejeon_area3)+
tm_fill(col="n",alpha = 0.8,palette = "viridis")+
tm_borders(col="black",alpha = 0.4)+
tm_view(view.legend.position = c("right", "bottom"))
colors <- viridis(100, option = "B")[30:70]
tm_shape(daejeon_area3)+
tm_fill(col="n",alpha = 0.8,style = "fixed", palette = colors)+
tm_borders(col="black",alpha = 0.4)+
tm_view(view.legend.position = c("right", "bottom"))
colors <- viridis(100, option = "B")[30:70]
library(viridis)
colors <- viridis(100, option = "B")[30:70]
tm_shape(daejeon_area3)+
tm_fill(col="n",alpha = 0.8,style = "fixed", palette = colors)+
tm_borders(col="black",alpha = 0.4)+
tm_view(view.legend.position = c("right", "bottom"))
tm_shape(daejeon_area3)+
tm_fill(col="n",alpha = 0.8,style = "fixed", palette = colors)+
tm_borders(col="black",alpha = 0.4)+
tm_view(view.legend.position = c("right", "bottom"))
library(viridis)
colors <- viridis(100, option = "B")[30:70]
tm_shape(daejeon_area3)+
tm_fill(col="n",alpha = 0.8,style = "fixed", palette = colors)+
tm_borders(col="black",alpha = 0.4)+
tm_view(view.legend.position = c("right", "bottom"))
tm_shape(daejeon_area3)+
tm_fill(col="n",alpha = 0.8,style = "fixed", palette = viridis(100, option = "B")[30:70])+
tm_borders(col="black",alpha = 0.4)+
tm_view(view.legend.position = c("right", "bottom"))
tm_shape(daejeon_area3)+
tm_fill(col="n",alpha = 0.8,palette = "viridis")+
tm_borders(col="black",alpha = 0.4)+
tm_view(view.legend.position = c("right", "bottom"))
daejeon_sf <- daejeon %>% st_as_sf(coords = c("경도","위도"), crs=4326, remove = T)
p1 <- map + geom_sf(data = daejeon, inherit.aes=F, aes(size=사상자수), alpha = 0.7)
p1
daejeon_sf <- daejeon %>% st_as_sf(coords = c("경도","위도"), crs=4326, remove = T)
View(daejeon_sf)
tm_shape(daejeon_area3)+
tm_polygons()
tm_shape(daejeon_area3)+
tm_polygons()+
tm_shape(daejeon_sf)+
tm_dots()
tm_shape(daejeon_area3)+
tm_polygons()+
tm_shape(daejeon_sf)+
tm_dots(size="사상자수")
tm_shape(daejeon_area3)+
tm_polygons()+
tm_shape(daejeon_sf)+
tm_dots(size="사상자수",alpha = 0.7)
map <- get_map(location = "대전", zoom = 12)
map <- get_map(location = "Daejeon", zoom = 12)
map <- get_map(location = "Daejeon", zoom = 12)
tmap_mode("plot")
tmap_plot <- tm_shape(daejeon_sf)+
tm_dots()
tm_shape(daejeon_sf)+
tm_dots()
tmap_plot <- tm_shape(daejeon_sf)+
tm_dots(size="사상자수")
tm_shape(daejeon_sf)+
tm_dots(size="사상자수")
tmap_ggplot <- tmap_grob(tmap_plot)
# ggmap과 tmap을 함께 그리기
ggmap(map) +
annotation_custom(grob = tmap_ggplot, xmin = -127.6, xmax = -127.3, ymin = 36.25, ymax = 36.5)
# ggmap과 tmap을 함께 그리기
ggmap(map) +
annotation_custom(grob = tmap_ggplot, xmin = -127.6, xmax = -127.3, ymin = 36.25, ymax = 36.5)+
coord_cartesian()
# ggmap과 tmap을 함께 그리기
ggmap(map) +
coord_cartesian()+
annotation_custom(grob = tmap_ggplot, xmin = -127.6, xmax = -127.3, ymin = 36.25, ymax = 36.5)
View(tmap_ggplot)
map + geom_sf(data = daejeon, inherit.aes=F, aes(size=사상자수), alpha = 0.7)
map + geom_sf(data = daejeon_sf, inherit.aes=F, aes(size=사상자수), alpha = 0.7)
map <- get_map(location = "Daejeon", zoom = 12)
map + geom_sf(data = daejeon_sf, inherit.aes=F, aes(size=사상자수), alpha = 0.7)
map + geom_sf(data = daejeon_sf)
tm_shape(daejeon_area3)+
tm_polygons()+
tm_shape(daejeon_sf)+
tm_dots(size="사상자수",alpha = 0.7)
tmap_mode("view")
tm_shape(daejeon_area3)+
tm_fill(col="n",alpha = 0.8,palette = "RdBu")+
tm_borders(col="black",alpha = 0.4)+
tm_view(view.legend.position = c("right", "bottom"))
tm_shape(daejeon_area3)+
tm_fill(col="n",alpha = 0.8)+
tm_borders(col="black",alpha = 0.4)+
tm_view(view.legend.position = c("right", "bottom"))
daejeon_sf <- daejeon %>% st_as_sf(coords = c("경도","위도"), crs=4326, remove = T)
tm_shape(daejeon_area3)+
tm_polygons()+
tm_shape(daejeon_sf)+
tm_dots(size="사상자수",alpha = 0.7)
daejeon_acc_sf <- daejeon_acc_sf %>% select(-발생지시군구) #발생지시군구 열 삭제하기
daejeon_acc_sf <- daejeon_sf %>% select(-발생지시군구) #발생지시군구 열 삭제하기
daejeon_acc_sf <- daejeon %>% st_as_sf(coords = c("경도", "위도"), crs = 4326, remove = FALSE)
daejeon_acc_sf <- daejeon_acc_sf %>% select(-발생지시군구) #발생지시군구 열 삭제하기
daejeon_acc_sf <- daejeon_acc_sf %>% select(-발생지시군구) #발생지시군구 열 삭제하기
daejeon_acc_sf <- daejeon_acc_sf %>% select(-발생지시군구) #발생지시군구 열 삭제하기
View(daejeon_acc_sf)
daejeon_acc_sf <- daejeon_acc_sf %>% select(-`발생지시군구`) #발생지시군구 열 삭제하기
raw.data <- read.csv("C:/trainsets_2/12_20_death.csv", header = TRUE,encoding="cp949")
raw.data <- read.csv("C:/trainsets_2/12_20_death.csv", header = TRUE,encoding="euc-kr")
raw.data <- read.csv("C:/trainsets_2/12_20_death.csv", header = TRUE,encoding="utf-8")
raw.data <- read.csv("C:/trainsets_2/12_20_death.csv", header = TRUE,encoding="ansi")
Sys.getlocale()
Sys.setlocale("LC_ALL","C")
raw.data <- read.csv("C:/trainsets_2/12_20_death.csv", header = TRUE,encoding="")
View(raw.data)
raw.data <- read.csv("C:/trainsets_2/12_20_death.csv", header = TRUE,encoding="euc-kr")
View(raw.data)
raw.data <- read.csv("C:/trainsets_2/12_20_death.csv", header = TRUE,encoding="utf-8")
View(raw.data)
Sys.setlocale("LC_ALL","Korean")
View(raw.data)
raw.data <- read.csv("C:/trainsets_2/12_20_death.csv", header = TRUE,encoding="utf-8")
Sys.getlocale()
Sys.setlocale("LC_ALL","C")
Sys.setlocale("LC_ALL","Korean")
raw.data <- read.csv("C:/trainsets_2/12_20_death.csv", header = TRUE,encoding="utf-8")
#구조 확인
str(raw.data)
#테이블 확인
#View(raw.data)
raw.data <- read.csv("C:/trainsets_2/12_20_death.csv", header = TRUE,encoding="utf-8")
raw.data <- read.csv("C:/trainsets_2/12_20_death.csv", header = TRUE,encoding="euc-kr")
rm(list = ls())
library(sf)
library(tidyverse)
library(rgdal)
library(plotly)
library(ggtext)
library(tmap)
rm(list = ls())
library(sf)
library(tidyverse)
library(rgdal)
library(plotly)
library(ggtext)
library(tmap)
data_sp <- readOGR("C:/trainsets_2/LSMD_ADM_SECT_UMD_충남/LSMD_ADM_SECT_UMD_44.shp",encoding = "euc-kr")
data_sp <- readOGR("C:/trainsets_2/LSMD_ADM_SECT_UMD_/LSMD_ADM_SECT_UMD_44.shp",encoding = "euc-kr")
data_sp <- readOGR("C:/trainsets_2/LSMD_ADM_SECT_UMD_/LSMD_ADM_SECT_UMD_44.shp",encoding = "euc-kr")
data_sp <- readOGR("C:/trainsets_2/LSMD_ADM_SECT_UMD_/LSMD_ADM_SECT_UMD_44.shp",encoding = "euc-kr")
data_sf = st_as_sf(data_sp)
data_sf = st_as_sf(data_sp)
data_sf %>% head()
daejeon_bus <- read.csv("C:/Sungil_LAB/daejeon_bus_2.csv",sep = "|")
st_2 <- read.csv("C:/Sungil_LAB/station-info_2.csv",sep = "|")
daejeon_bus <- read.csv("C:/Sungil_LAB/daejeon_bus_2.csv",sep = "|")
st_2 <- read.csv("C:/Sungil_LAB/station-info_2.csv",sep = "|")
st_2 <- st_2 %>% select(BUS_NODE_ID,BUS_NODE_NM)
names(st_2)[1] <- "BUS_STTN_ID"
st_3 <- daejeon_bus %>% select(HH_ID,BUS_ROUTE_ID,BUS_STTN_ID,GETON_CNT,GETOFF_CNT,TRANSF_PSNGR_CNT)
data_2 <- st_3 %>% left_join(st_2,by = "BUS_STTN_ID")
data_3 <- data_2 %>% filter(BUS_NODE_NM %in% c("한남대학교","한남로삼거리","한숲아파트","한남대북문","대전신학대학교"))
data_3 %>%
filter(BUS_NODE_NM == "한남로삼거리") %>%
group_by(HH_ID,BUS_ROUTE_ID) %>%
summarize(cnt = sum(GETON_CNT), .groups = "drop") %>%
ggplot(aes(x=HH_ID,y=factor(BUS_ROUTE_ID),fill=cnt))+
geom_tile(width = .95,height = 0.95)+
coord_fixed(expand = FALSE)+
scale_fill_viridis_c(option = "B",
begin = 0.15,
end = 0.99,
name = "시간대별 승차인원 (명)",
direction = -1)+
ylab("한남로삼거리")+
scale_x_continuous(name = "시간대",
breaks = c(5:23))+
theme(plot.margin = margin(0, 0, 0, 0))
data_3 %>%
filter(BUS_NODE_NM == "한남로삼거리") %>%
group_by(HH_ID,BUS_ROUTE_ID) %>%
summarize(cnt = sum(GETON_CNT), .groups = "drop") %>%
ggplot(aes(x=HH_ID,y=factor(BUS_ROUTE_ID),fill=cnt))+
geom_tile(width = .95,height = 0.95)+
coord_fixed(expand = FALSE)+
scale_fill_viridis_c(option = "B",
begin = 0.15,
end = 0.99,
name = "시간대별 승차인원 (명)",
direction = -1)+
ylab("한남로삼거리")+
scale_x_continuous(name = "시간대",
breaks = c(5:23))+
theme(plot.margin = margin(0, 0, 0, 0))
rm(list=ls())
library(tidyverse)
daejeon_bus <- read.csv("C:/Sungil_LAB/daejeon_bus_2.csv",sep = "|")
st_2 <- read.csv("C:/Sungil_LAB/station-info_2.csv",sep = "|")
st_2 <- st_2 %>% select(BUS_NODE_ID,BUS_NODE_NM)
names(st_2)[1] <- "BUS_STTN_ID"
st_3 <- daejeon_bus %>% select(HH_ID,BUS_ROUTE_ID,BUS_STTN_ID,GETON_CNT,GETOFF_CNT,TRANSF_PSNGR_CNT)
data_2 <- st_3 %>% left_join(st_2,by = "BUS_STTN_ID")
data_3 <- data_2 %>% filter(BUS_NODE_NM %in% c("한남대학교","한남로삼거리","한숲아파트","한남대북문","대전신학대학교"))
data_3 %>%
filter(BUS_NODE_NM == "한남로삼거리") %>%
group_by(HH_ID,BUS_ROUTE_ID) %>%
summarize(cnt = sum(GETON_CNT), .groups = "drop") %>%
ggplot(aes(x=HH_ID,y=factor(BUS_ROUTE_ID),fill=cnt))+
geom_tile(width = .95,height = 0.95)+
coord_fixed(expand = FALSE)+
scale_fill_viridis_c(option = "B",
begin = 0.15,
end = 0.99,
name = "시간대별 승차인원 (명)",
direction = -1)+
ylab("한남로삼거리")+
scale_x_continuous(name = "시간대",
breaks = c(5:23))+
theme(plot.margin = margin(0, 0, 0, 0))
View(data_3)
View(st_2)
daejeon_bus <- read.csv("C:/Sungil_LAB/daejeon_bus_2.csv",sep = "|")
daejeon_bus <- read.csv("https://raw.githubusercontent.com/Sungileo/trainsets_2/main/daejeon_bus_2.csv",sep = "|")
View(daejeon_bus)
st_2 <- read.csv("https://raw.githubusercontent.com/Sungileo/trainsets_2/main/station-info_2.csv",sep = "|")
View(st_2)
st_2 <- read.csv("https://raw.githubusercontent.com/Sungileo/trainsets_2/main/station-info_2.csv",sep = "|",encoding = "utf-8")
st_2 <- read.csv("https://raw.githubusercontent.com/Sungileo/trainsets_2/main/station-info_2.csv",sep = "|",encoding = "euc-kr")
st_2 <- read.csv("https://raw.githubusercontent.com/Sungileo/trainsets_2/main/station-info_2.csv",sep = "|",encoding = "cp949")
Sys.getlocale("LC_ALL","Korean")
Sys.getlocale("LC_ALL", "Korean")
Sys.setlocale("LC_ALL", "Korean")
st_2 <- read.csv("https://raw.githubusercontent.com/Sungileo/trainsets_2/main/station-info_2.csv",sep = "|",encoding = "cp949")
st_2 <- read.csv("https://raw.githubusercontent.com/Sungileo/trainsets_2/main/station-info_2.csv",sep = "|")
Sys.setlocale("LC_ALL", "C")
Sys.setlocale("LC_ALL", "Korean")
st_2 <- read.csv("https://raw.githubusercontent.com/Sungileo/trainsets_2/main/station-info_2.csv",sep = "|")
st_2 <- read.csv("https://raw.githubusercontent.com/Sungileo/trainsets_2/main/station-info_2.csv",sep = "|")
st_2 <- read.csv("C:/trainsets_2/station-info_2.csv",sep = "|")
st_2 <- read.csv("C:/trainsets_2/station-info_2.csv",sep = "|",encoding = "euc-kr")
st_2 <- read.csv("C:/trainsets_2/station-info_2.csv",sep = "|",encoding = "cp-949")
st_2 <- read.csv("C:/trainsets_2/station-info_2.csv",sep = "|",encoding = "cp949")
read.csv("C:/trainsets_2/station-info_2.csv",sep = "|",encoding = "cp949") %>% VIew()
read.csv("C:/trainsets_2/station-info_2.csv",sep = "|",encoding = "cp949") %>% View()
read.csv("C:/trainsets_2/station-info_2.csv",sep = "|",encoding = "utf-8") %>% View()
Sys.setlocale("LC_ALL", "C")
read.csv("C:/trainsets_2/station-info_2.csv",sep = "|",encoding = "utf-8") %>% View()
Sys.setlocale("LC_ALL", "Korean")
read.csv("C:/trainsets_2/station-info_3.csv",sep = "|") %>% View()
read.csv("C:/trainsets_2/station-info_3.csv",sep = "|") %>% View()
read.csv("C:/trainsets_2/station-info_3.csv",sep = "|") %>% View()
read.csv("C:/trainsets_2/station-info_3.txt",sep = "|") %>% View()
daejeon_bus <- read.csv("https://raw.githubusercontent.com/Sungileo/trainsets_2/main/daejeon_bus_2.csv",sep = "|")
daejeon_bus <- read.csv("https://raw.githubusercontent.com/Sungileo/trainsets_2/main/daejeon_bus_2.csv",sep = "|")
st_2 <- read.csv("C:/trainsets_2/station-info_3.txt",sep = "|")
st_2 <- read.csv("C:/trainsets_2/station-info_3.txt",sep = "|")
st_2 <- st_2 %>% select(BUS_NODE_ID,BUS_NODE_NM)
names(st_2)[1] <- "BUS_STTN_ID"
st_3 <- daejeon_bus %>% select(HH_ID,BUS_ROUTE_ID,BUS_STTN_ID,GETON_CNT,GETOFF_CNT,TRANSF_PSNGR_CNT)
data_2 <- st_3 %>% left_join(st_2,by = "BUS_STTN_ID")
data_3 <- data_2 %>% filter(BUS_NODE_NM %in% c("한남대학교","한남로삼거리","한숲아파트","한남대북문","대전신학대학교"))
data_3 %>%
filter(BUS_NODE_NM == "한남로삼거리") %>%
group_by(HH_ID,BUS_ROUTE_ID) %>%
summarize(cnt = sum(GETON_CNT), .groups = "drop") %>%
ggplot(aes(x=HH_ID,y=factor(BUS_ROUTE_ID),fill=cnt))+
geom_tile(width = .95,height = 0.95)+
coord_fixed(expand = FALSE)+
scale_fill_viridis_c(option = "B",
begin = 0.15,
end = 0.99,
name = "시간대별 승차인원 (명)",
direction = -1)+
ylab("한남로삼거리")+
scale_x_continuous(name = "시간대",
breaks = c(5:23))+
theme(plot.margin = margin(0, 0, 0, 0))
daejeon_bus <- read.csv("https://raw.githubusercontent.com/Sungileo/trainsets_2/main/daejeon_bus_2.csv",sep = "|")
st_2 <- read.csv("C:/trainsets_2/station-info_3.txt",sep = "|")
View(daejeon_bus)
View(st_2)
st_2 <- read.csv("C:/trainsets_2/station-info_2.txt",sep = "|")
st_2 <- read.csv("C:/trainsets_2/station-info_4.txt",sep = "|")
